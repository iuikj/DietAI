{"openapi":"3.1.0","info":{"title":"DietAI Backend API","description":"DietAI智能饮食健康管理后端服务","version":"1.0.0"},"paths":{"/":{"get":{"summary":"Root","description":"根路径","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"健康检查","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/auth/register":{"post":{"tags":["认证","认证"],"summary":"Register","description":"用户注册","operationId":"register_api_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/login":{"post":{"tags":["认证","认证"],"summary":"Login","description":"用户登录","operationId":"login_api_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/refresh-token":{"post":{"tags":["认证","认证"],"summary":"Refresh Token","description":"刷新访问令牌","operationId":"refresh_token_api_auth_refresh_token_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/logout":{"post":{"tags":["认证","认证"],"summary":"Logout","description":"用户登出","operationId":"logout_api_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/change-password":{"post":{"tags":["认证","认证"],"summary":"Change Password","description":"修改密码","operationId":"change_password_api_auth_change_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChangeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/me":{"get":{"tags":["认证","认证"],"summary":"Get Current User Info","description":"获取当前用户信息","operationId":"get_current_user_info_api_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/verify-token":{"get":{"tags":["认证","认证"],"summary":"Verify Token Endpoint","description":"验证令牌有效性","operationId":"verify_token_endpoint_api_auth_verify_token_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/users/profile":{"get":{"tags":["用户","用户","用户管理"],"summary":"Get User Profile","description":"获取用户资料","operationId":"get_user_profile_api_users_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["用户","用户","用户管理"],"summary":"Update User Profile","description":"更新用户资料","operationId":"update_user_profile_api_users_profile_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfileUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/users/health-goals":{"post":{"tags":["用户","用户","用户管理"],"summary":"Create Health Goal","description":"创建健康目标","operationId":"create_health_goal_api_users_health_goals_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthGoalCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["用户","用户","用户管理"],"summary":"Get Health Goals","description":"获取健康目标列表","operationId":"get_health_goals_api_users_health_goals_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"状态筛选","title":"Status Filter"},"description":"状态筛选"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/users/health-goals/{goal_id}":{"put":{"tags":["用户","用户","用户管理"],"summary":"Update Health Goal","description":"更新健康目标","operationId":"update_health_goal_api_users_health_goals__goal_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"goal_id","in":"path","required":true,"schema":{"type":"integer","title":"Goal Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthGoalCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/users/diseases":{"post":{"tags":["用户","用户","用户管理"],"summary":"Add Disease","description":"添加疾病信息","operationId":"add_disease_api_users_diseases_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DiseaseCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["用户","用户","用户管理"],"summary":"Get Diseases","description":"获取疾病信息列表","operationId":"get_diseases_api_users_diseases_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"is_current","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"是否当前病症","title":"Is Current"},"description":"是否当前病症"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/users/allergies":{"post":{"tags":["用户","用户","用户管理"],"summary":"Add Allergy","description":"添加过敏信息","operationId":"add_allergy_api_users_allergies_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllergyCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["用户","用户","用户管理"],"summary":"Get Allergies","description":"获取过敏信息列表","operationId":"get_allergies_api_users_allergies_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"allergen_type","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"过敏原类型","title":"Allergen Type"},"description":"过敏原类型"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/users/weight-records":{"post":{"tags":["用户","用户","用户管理"],"summary":"Add Weight Record","description":"添加体重记录","operationId":"add_weight_record_api_users_weight_records_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeightRecordCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["用户","用户","用户管理"],"summary":"Get Weight Records","description":"获取体重记录列表","operationId":"get_weight_records_api_users_weight_records_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","description":"记录数量限制","default":50,"title":"Limit"},"description":"记录数量限制"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/users/onboarding/status":{"get":{"tags":["用户","用户","用户管理"],"summary":"Get Onboarding Status","description":"获取用户引导状态 - 简化版本，因为引导字段不存在","operationId":"get_onboarding_status_api_users_onboarding_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/users/onboarding/step":{"post":{"tags":["用户","用户","用户管理"],"summary":"Update Onboarding Step","description":"更新用户引导步骤 - 简化版本","operationId":"update_onboarding_step_api_users_onboarding_step_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingStepUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/users/onboarding/complete":{"post":{"tags":["用户","用户","用户管理"],"summary":"Complete Onboarding","description":"完成用户引导并批量保存数据 - 简化版本","operationId":"complete_onboarding_api_users_onboarding_complete_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingDataRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/users/onboarding/reset":{"post":{"tags":["用户","用户","用户管理"],"summary":"Reset Onboarding","description":"重置用户引导状态 - 简化版本","operationId":"reset_onboarding_api_users_onboarding_reset_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/foods/records":{"post":{"tags":["食物","食物记录"],"summary":"Create Food Record","description":"创建食物记录并使用Agent分析图片","operationId":"create_food_record_api_foods_records_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoodRecordCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["食物","食物记录"],"summary":"Get Food Records","description":"获取食物记录列表","operationId":"get_food_records_api_foods_records_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"},{"name":"meal_type","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"餐次类型","title":"Meal Type"},"description":"餐次类型"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页大小","default":20,"title":"Page Size"},"description":"每页大小"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/foods/records/{record_id}":{"get":{"tags":["食物","食物记录"],"summary":"Get Food Record","description":"获取食物记录详情","operationId":"get_food_record_api_foods_records__record_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"integer","title":"Record Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/foods/records/{record_id}/nutrition":{"post":{"tags":["食物","食物记录"],"summary":"Add Nutrition Detail","description":"添加营养详情","operationId":"add_nutrition_detail_api_foods_records__record_id__nutrition_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"integer","title":"Record Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NutritionDetailCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/foods/daily-summary/{summary_date}":{"get":{"tags":["食物","食物记录"],"summary":"Get Daily Nutrition Summary","description":"获取每日营养汇总","operationId":"get_daily_nutrition_summary_api_foods_daily_summary__summary_date__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"summary_date","in":"path","required":true,"schema":{"type":"string","format":"date","title":"Summary Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/foods/nutrition-trends":{"get":{"tags":["食物","食物记录"],"summary":"Get Nutrition Trends","description":"获取营养趋势","operationId":"get_nutrition_trends_api_foods_nutrition_trends_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"},{"name":"metrics","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"指标列表，逗号分隔","default":"calories,protein,fat,carbohydrates","title":"Metrics"},"description":"指标列表，逗号分隔"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/foods/upload-image":{"post":{"tags":["食物","食物记录"],"summary":"Upload Food Image","description":"上传食物图片","operationId":"upload_food_image_api_foods_upload_image_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_food_image_api_foods_upload_image_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/foods/images/url":{"get":{"tags":["食物","食物记录"],"summary":"Get Image Url","description":"获取图片的访问URL","operationId":"get_image_url_api_foods_images_url_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"object_name","in":"query","required":true,"schema":{"type":"string","description":"对象名称","title":"Object Name"},"description":"对象名称"},{"name":"expires_minutes","in":"query","required":false,"schema":{"type":"integer","maximum":10080,"minimum":1,"description":"URL有效期(分钟)","default":60,"title":"Expires Minutes"},"description":"URL有效期(分钟)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/health/analysis":{"post":{"tags":["健康","健康分析"],"summary":"Health Analysis","description":"健康分析","operationId":"health_analysis_api_health_analysis_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/health/bmr":{"get":{"tags":["健康","健康分析"],"summary":"Get Bmr","description":"计算基础代谢率(BMR)","operationId":"get_bmr_api_health_bmr_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/health/tdee":{"get":{"tags":["健康","健康分析"],"summary":"Get Tdee","description":"计算每日总能量消耗(TDEE)","operationId":"get_tdee_api_health_tdee_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/health/nutrition-balance":{"get":{"tags":["健康","健康分析"],"summary":"Get Nutrition Balance","description":"营养平衡分析","operationId":"get_nutrition_balance_api_health_nutrition_balance_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/health/health-score":{"get":{"tags":["健康","健康分析"],"summary":"Get Health Score","description":"健康评分","operationId":"get_health_score_api_health_health_score_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/health/weight-trend":{"get":{"tags":["健康","健康分析"],"summary":"Get Weight Trend","description":"体重趋势分析","operationId":"get_weight_trend_api_health_weight_trend_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":7,"description":"天数","default":30,"title":"Days"},"description":"天数"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat/send-message":{"post":{"tags":["AI对话","AI对话"],"summary":"Send Chat Message","description":"发送聊天消息并获取AI回复","operationId":"send_chat_message_api_chat_send_message_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Session Id"}},{"name":"message","in":"query","required":false,"schema":{"type":"string","default":"","title":"Message"}},{"name":"session_type","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Session Type"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat/start-session":{"post":{"tags":["AI对话","AI对话"],"summary":"Start Chat Session","description":"开始新的聊天会话","operationId":"start_chat_session_api_chat_start_session_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationSessionCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/chat/sessions/{session_id}/context":{"get":{"tags":["AI对话","AI对话"],"summary":"Get Session Context","description":"获取会话上下文信息","operationId":"get_session_context_api_chat_sessions__session_id__context_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"integer","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat/sessions":{"get":{"tags":["AI对话","AI对话"],"summary":"Get Chat Sessions","description":"获取用户的聊天会话列表 - 前端专用","operationId":"get_chat_sessions_api_chat_sessions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_type","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Session Type"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat/sessions/{session_id}/messages":{"get":{"tags":["AI对话","AI对话"],"summary":"Get Session Messages","description":"获取会话消息历史 - 前端专用","operationId":"get_session_messages_api_chat_sessions__session_id__messages_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"integer","title":"Session Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat/sessions/{session_id}":{"delete":{"tags":["AI对话","AI对话"],"summary":"Delete Session","description":"删除聊天会话 - 前端专用","operationId":"delete_session_api_chat_sessions__session_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"integer","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/analysis-chat/chat-with-analysis":{"post":{"tags":["分析页面聊天","分析页面聊天"],"summary":"Chat With Food Analysis","description":"基于食物分析结果的聊天\n\n功能：\n- 将分析结果作为上下文信息\n- 自动创建或使用现有的营养咨询会话\n- 提供针对当前分析食物的专业建议","operationId":"chat_with_food_analysis_api_analysis_chat_chat_with_analysis_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/analysis-chat/quick-analysis-chat":{"post":{"tags":["分析页面聊天","分析页面聊天"],"summary":"Quick Analysis Chat","description":"快速分析咨询 - 不需要会话管理\n\n适用于分析页面的快速咨询功能","operationId":"quick_analysis_chat_api_analysis_chat_quick_analysis_chat_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"question","in":"query","required":false,"schema":{"type":"string","default":"这份分析结果怎么样？","title":"Question"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Analysis Result"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AllergyCreate":{"properties":{"allergen_type":{"type":"integer","maximum":4.0,"minimum":1.0,"title":"Allergen Type","description":"过敏原类型：1食物2药物3环境4其他"},"allergen_name":{"type":"string","maxLength":100,"title":"Allergen Name","description":"过敏原名称"},"severity_level":{"anyOf":[{"type":"integer","maximum":3.0,"minimum":1.0},{"type":"null"}],"title":"Severity Level","description":"严重程度1-3"},"reaction_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reaction Description","description":"反应描述"}},"type":"object","required":["allergen_type","allergen_name"],"title":"AllergyCreate","description":"过敏信息创建模型"},"AnalysisChatRequest":{"properties":{"message":{"type":"string","title":"Message","description":"用户消息"},"food_analysis":{"additionalProperties":true,"type":"object","title":"Food Analysis","description":"食物分析结果"},"session_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Session Id","description":"会话ID，如果为空则创建新会话"}},"type":"object","required":["message","food_analysis"],"title":"AnalysisChatRequest","description":"分析页面聊天请求"},"BaseResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"是否成功"},"message":{"type":"string","title":"Message","description":"消息"},"data":{"anyOf":[{},{"type":"null"}],"title":"Data","description":"数据"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"时间戳"}},"type":"object","required":["success","message"],"title":"BaseResponse","description":"基础响应模型"},"Body_upload_food_image_api_foods_upload_image_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_food_image_api_foods_upload_image_post"},"ConversationSessionCreate":{"properties":{"session_type":{"type":"integer","maximum":4.0,"minimum":1.0,"title":"Session Type","description":"会话类型：1营养咨询2健康评估3食物识别4运动建议","default":1},"title":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Title","description":"会话标题"}},"type":"object","title":"ConversationSessionCreate","description":"对话会话创建模型"},"DiseaseCreate":{"properties":{"disease_code":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Disease Code","description":"疾病编码"},"disease_name":{"type":"string","maxLength":200,"title":"Disease Name","description":"疾病名称"},"severity_level":{"anyOf":[{"type":"integer","maximum":3.0,"minimum":1.0},{"type":"null"}],"title":"Severity Level","description":"严重程度1-3"},"diagnosed_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Diagnosed Date","description":"诊断日期"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"备注"}},"type":"object","required":["disease_name"],"title":"DiseaseCreate","description":"疾病信息创建模型"},"FoodRecordCreate":{"properties":{"record_date":{"type":"string","format":"date","title":"Record Date","description":"记录日期"},"meal_type":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Meal Type","description":"餐次类型：1早餐2午餐3晚餐4加餐5夜宵"},"food_name":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Food Name","description":"食物名称"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"描述"},"image_url":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Image Url","description":"图片URL"},"recording_method":{"anyOf":[{"type":"integer","maximum":3.0,"minimum":1.0},{"type":"null"}],"title":"Recording Method","description":"记录方式：1手动2拍照3语音","default":1}},"type":"object","required":["record_date","meal_type"],"title":"FoodRecordCreate","description":"食物记录创建模型"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthAnalysisRequest":{"properties":{"analysis_type":{"type":"string","title":"Analysis Type","description":"分析类型：bmr,tdee,nutrition_balance,health_score"},"date_range":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Date Range","description":"日期范围"},"parameters":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Parameters","description":"额外参数"}},"type":"object","required":["analysis_type"],"title":"HealthAnalysisRequest","description":"健康分析请求模型"},"HealthGoalCreate":{"properties":{"goal_type":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Goal Type","description":"目标类型：1减重2增重3维持4增肌5减脂"},"target_weight":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Target Weight","description":"目标体重"},"target_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Target Date","description":"目标日期"}},"type":"object","required":["goal_type"],"title":"HealthGoalCreate","description":"健康目标创建模型"},"NutritionDetailCreate":{"properties":{"food_record_id":{"type":"integer","title":"Food Record Id","description":"食物记录ID"},"calories":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Calories","description":"热量(kcal)","default":0},"protein":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Protein","description":"蛋白质(g)","default":0},"fat":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Fat","description":"脂肪(g)","default":0},"carbohydrates":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Carbohydrates","description":"碳水化合物(g)","default":0},"dietary_fiber":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Dietary Fiber","description":"膳食纤维(g)","default":0},"sugar":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Sugar","description":"糖类(g)","default":0},"sodium":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Sodium","description":"钠(mg)","default":0},"cholesterol":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Cholesterol","description":"胆固醇(mg)","default":0},"vitamin_a":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Vitamin A","description":"维生素A(μg)","default":0},"vitamin_c":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Vitamin C","description":"维生素C(mg)","default":0},"vitamin_d":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Vitamin D","description":"维生素D(μg)","default":0},"calcium":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Calcium","description":"钙(mg)","default":0},"iron":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Iron","description":"铁(mg)","default":0},"potassium":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Potassium","description":"钾(mg)","default":0},"confidence_score":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Confidence Score","description":"置信度"},"analysis_method":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Analysis Method","description":"分析方法"}},"type":"object","required":["food_record_id"],"title":"NutritionDetailCreate","description":"营养详情创建模型"},"OnboardingDataRequest":{"properties":{"basic_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Basic Info","description":"基本信息"},"physical_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Physical Data","description":"身体数据"},"health_goals":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Health Goals","description":"健康目标"},"dietary_preferences":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Dietary Preferences","description":"饮食偏好"},"medical_conditions":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Medical Conditions","description":"疾病信息"},"allergies":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Allergies","description":"过敏信息"},"lifestyle_habits":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Lifestyle Habits","description":"生活习惯"}},"type":"object","title":"OnboardingDataRequest","description":"引导数据请求模型"},"OnboardingStepUpdate":{"properties":{"step":{"type":"integer","maximum":10.0,"minimum":0.0,"title":"Step","description":"当前步骤"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data","description":"步骤数据"},"completed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Completed","description":"是否完成"}},"type":"object","required":["step"],"title":"OnboardingStepUpdate","description":"引导步骤更新模型"},"PasswordChangeRequest":{"properties":{"old_password":{"type":"string","title":"Old Password","description":"旧密码"},"new_password":{"type":"string","minLength":8,"title":"New Password","description":"新密码"}},"type":"object","required":["old_password","new_password"],"title":"PasswordChangeRequest","description":"修改密码请求模型"},"RefreshTokenRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token","description":"刷新令牌"}},"type":"object","required":["refresh_token"],"title":"RefreshTokenRequest","description":"刷新令牌请求模型"},"UserCreate":{"properties":{"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username","description":"用户名"},"email":{"type":"string","format":"email","title":"Email","description":"邮箱"},"password":{"type":"string","minLength":8,"title":"Password","description":"密码"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone","description":"手机号"}},"type":"object","required":["username","email","password"],"title":"UserCreate","description":"用户创建模型"},"UserLogin":{"properties":{"username":{"type":"string","title":"Username","description":"用户名或邮箱"},"password":{"type":"string","title":"Password","description":"密码"}},"type":"object","required":["username","password"],"title":"UserLogin","description":"用户登录模型"},"UserProfileUpdate":{"properties":{"real_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Real Name","description":"真实姓名"},"gender":{"anyOf":[{"type":"integer","maximum":3.0,"minimum":1.0},{"type":"null"}],"title":"Gender","description":"性别：1男2女3其他"},"birth_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Birth Date","description":"出生日期"},"height":{"anyOf":[{"type":"number","maximum":300.0,"exclusiveMinimum":0.0},{"type":"null"}],"title":"Height","description":"身高(cm)"},"weight":{"anyOf":[{"type":"number","maximum":1000.0,"exclusiveMinimum":0.0},{"type":"null"}],"title":"Weight","description":"体重(kg)"},"activity_level":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Activity Level","description":"活动级别1-5"},"occupation":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Occupation","description":"职业"},"region":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Region","description":"地区"},"dietary_preferences":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Dietary Preferences","description":"饮食偏好"},"food_dislikes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Food Dislikes","description":"不喜欢的食物"},"wake_up_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wake Up Time","description":"起床时间"},"sleep_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sleep Time","description":"睡觉时间"},"meal_times":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Meal Times","description":"用餐时间"},"health_status":{"anyOf":[{"type":"integer","maximum":3.0,"minimum":1.0},{"type":"null"}],"title":"Health Status","description":"健康状态1-3"},"onboarding_step":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Onboarding Step","description":"引导步骤"},"onboarding_completed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Onboarding Completed","description":"引导完成状态"}},"type":"object","title":"UserProfileUpdate","description":"用户资料更新模型"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WeightRecordCreate":{"properties":{"weight":{"type":"number","exclusiveMinimum":0.0,"title":"Weight","description":"体重(kg)"},"body_fat_percentage":{"anyOf":[{"type":"number","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Body Fat Percentage","description":"体脂率"},"muscle_mass":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Muscle Mass","description":"肌肉量"},"measured_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Measured At","description":"测量时间"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"备注"},"device_type":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Device Type","description":"设备类型"}},"type":"object","required":["weight"],"title":"WeightRecordCreate","description":"体重记录创建模型"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}